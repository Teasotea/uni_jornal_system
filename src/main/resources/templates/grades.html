<!DOCTYPE html>
<html lang="en" xmlns:th="https://thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Grades</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
    <div th:replace="fragments/common-navbar::navbar"></div>
    <div class="container">
        <div class="row">
            <h1>Grades Table</h1>
        </div>

        <div class="row">
            <ul class="navbar-nav d-flex flex-row">
                <li class="nav-item">
                    <a th:href="@{/api/grades/new}" class="btn btn-success btn-sm mb-4 me-2">Add Grade</a>
                </li>
                <li class="nav-item">
                    <a th:href="@{/api/students/new}" class="btn btn-success btn-sm mb-4 me-2">Add Student (Row)</a>
                </li>
                <li class="nav-item">
                    <a th:href="@{/api/activities/new}" class="btn btn-success btn-sm mb-4 me-2">Add Activity
                        (Column)</a>
                </li>
            </ul>
        </div>

        <table class="table table-striped table-success">
            <thead>
                <tr>
                    <th class="col-sm-1" scope="col">id</th>
                    <th class="col-sm-1" scope="col">Student Name</th>
                    <th th:each="grade : ${grades}" th:text="${grade.activity.name}"></th>
                    <th class="col-sm-1" scope="col">Total</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="grade : ${grades}">
                    <td th:text="${grade.student.student_id}"></td>
                    <td th:text="${grade.student.fullName}"></td>
                    <th th:each="g : ${grades}">
                    <td th:text="${grade.grade}"></td>
                    </th>
                    <!-- <th th:each="g : ${grades}" 
                    th:if="${g.activity.grade!= null}">
                        <span th:text="${g.activity.grade}"></span>
                    </th>
                    <td th:unless="${g.activity.grade != null}"></td> -->


                    <!-- <td th:text="${grade.grade}"></td> -->

                    <!-- <td th:each="activity : ${activities}">
                    <td
                        th:with="currentGrade=${grades.?[student.student_id == #student.student_id and activity.activity_id == #activity.id][0]}">
                    <td th:if="${currentGrade != null}"> -->
                    <!-- Display the grade if available -->
                    <!-- <span th:text="${currentGrade.getGrade()}"></span> -->
                    <!-- </td> -->
                    <!-- Display an empty cell if no grade is available -->
                    <!-- <td th:unless="${currentGrade != null}"></td>
                    </td>
                    </td> -->
                    <td>
                        <a th:href="@{/api/grades/edit/{id}(id=${grade.grade_id})}"
                            class="btn btn-success mb-3">Update</a>
                        <a th:href="@{/api/grades/delete/{id}(id=${grade.grade_id})}"
                            class="btn btn-danger mb-3">Delete</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>

</html>